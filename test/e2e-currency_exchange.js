describe('E2E Currency exchange', () => {
    it('Should load home page and login', async () => {
        browser.url('http://zero.webappsecurity.com/index.html')
        const signIn = await $('button[id="signin_button"]')
        await signIn.waitForExist({timeout:500})
        await signIn.click()
        const login = await $('input[id="user_login"]')
        await login.waitForExist({timeout:500})
        await login.setValue('username')
        const password = await $('#user_password')
        password.setValue('password')
        await browser.pause(2000)
        const submit = await $('input[type="submit"]')
        await submit.click()
    })

    it('Should make currency exchange', async () => {
        const pay_bills = await $('#pay_bills_tab > a')
        await pay_bills.waitForExist({timeout:5000})
        await pay_bills.click()
        const foreign_currency = await $('#tabs > ul > li:nth-child(3) > a')
        await foreign_currency.waitForExist({timeout:5000})
        await foreign_currency.click()
        const currency_exchange = await $('#pc_currency')
        await currency_exchange.waitForExist({timeout:5000})
        await currency_exchange.selectByAttribute('value','GBP')
        await browser.pause(5000)
        const amount = await $('#pc_amount')
        await amount.setValue('500')
        const chkbox = await $('#pc_inDollars_true')
        await chkbox.click()
        const btn = await $('#purchase_cash')
        await btn.click()
        const message = await $('#alert_content')
        await message.waitForExist({timeout:5000})
        await expect(message).toHaveText('Foreign currency cash was successfully purchased.')
        await browser.saveScreenshot('Success Message.png')
        await browser.pause(5000)
    })
})